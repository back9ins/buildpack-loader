#!/usr/bin/env bash

set -e

BUILD_DIR=${1:-}
CACHE_DIR=${2:-}
ENV_DIR=${3:-}

tmpdir=$(mktemp --directory private-buildpack-XXXXXXXX)
git clone git@github.com:back9ins/buildpack "${tmpdir}"
cd "${tmpdir}"
bash ./bin/compile "${BUILD_DIR}" "${CACHE_DIR}" "${ENV_DIR}"
rm -rf "${tmpdir}"
